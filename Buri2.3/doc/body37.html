<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html;charset=Shift_JIS">
<TITLE>Workflow relevant data</TITLE>
<STYLE><!--
dfn.popup {text-decoration: underline;cursor: help;font-weight: bold}
--></STYLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<DIV CLASS="level"><A HREF="body.html">ホーム</A>
:<A HREF="body35.html">buriリファレンス</A>
:<A HREF="body36.html">XPDL</A>
:</DIV><BR><BR>
<H1>Workflow relevant data</H1>
<TABLE BORDER="0" WIDTH="100%"><TR><TD ALIGN="left">
<SPAN CLASS="prev"><A HREF="body36.html">前へ</A></SPAN>
</TD><TD ALIGN="right"><SPAN CLASS="next"><A HREF="body38.html">次へ</A></SPAN>
</TD></TR></TABLE>
<HR>
<BLOCKQUOTE><P CLASS="text">
ぶりは任意のDto(Entity)のライフサイクルを管理するライブラリです。Dtoの保存のタイミングや取得等をするためにXPDLにぶりのデータ定義とそのアクセス方法を記述する必要があります。<BR>
ただし、データ定義とアクセス方法は割と単純な事が多いのである種のDtoに関しては完全に省略可能になっています。<BR>
<BR>
とりあえずXPDLには<BR>
Idにクラス名、ExtendedAttributeの<BR>
Name：pkey　　(主キーの判定方法)<BR>
Value：(主キーのプロパティー名),(主キーが有効と言うことを確認するための式、戻り値はboolean)<BR>
<BR>
Name:insert<BR>
Name:update<BR>
Name:select<BR>
Name:selectMany(オプション)<BR>
Name:delete<BR>
でValueにはそれぞれの方法でアクセスする為のOgnl式を記述します<BR>
<BR>
さらにオプションとして<BR>
Name:preprocess(あるデータからDtoを取得するため)<BR>
があります<BR>
<BR>
で、pkeyの定義とinesrt〜deleteまでは何も設定せずに自動設定に任せることが出来ます。すべてを自動設定に任せる場合にはXPDL上にデータの定義すら不要です。<BR>
一部だけ定義をして他を自動設定に任せる場合は、定義したい部分だけ記述すれば不足部分は自動で補完します。<BR>
<BR>
自動設定するための条件は<BR>
・DtoがLong型の主キーを一つだけ持つこと。<BR>
・Dtoにプロパティー名_IDという名前の定数アノテーションが存在していること<BR>
・パッケージを除くクラス名からDtoとEntityという名前を削ってDaoを後ろに付けた名前でdiconから探せること<BR>
もしくはBuriConfigurationでDaoの位置を設定して、そのDaoがContainerに名前付きで登録してあること<BR>
・selectの時に主キーだけから検索するインタフェースがあること<BR>
<BR>
という感じです。<BR>
実際にはCodeGenを使って生成したDaoがちゃんと登録されていれば何の問題もなく動作するように設計してあります。<BR>
<BR>

</P></BLOCKQUOTE>

<HR>
<BLOCKQUOTE>
<UL CLASS="child"><LI><A HREF="body38.html">pkey</A>
<LI><A HREF="body39.html">insert</A>
<LI><A HREF="body40.html">update</A>
<LI><A HREF="body41.html">select</A>
<LI><A HREF="body42.html">selectMany</A>
<LI><A HREF="body43.html">preprocess</A>
</UL>

</BLOCKQUOTE>
<HR>
<SPAN CLASS="return"><A HREF="body36.html">XPDL に戻る</A></SPAN>
</BODY></HTML>
